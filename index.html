<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kings Protocol</title>

    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:,">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="fire-mode">
    <div class="container" style="position:relative;">

        <!-- Header -->
        <div style="margin-bottom: 30px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; gap: 12px;">

                <!-- Clock -->
                <div class="widget" id="clockWidget" style="flex: 1;">
                    <div class="widget-icon">ğŸ•</div>
                    <div>
                        <div class="widget-value" id="currentTime">--:--</div>
                        <div class="widget-label" id="currentLocation">New York</div>
                        <div class="widget-sublabel" id="currentDate">---</div>
                    </div>
                </div>

                <!-- Weather -->
                <div class="widget" id="weatherWidget" style="flex: 1;">
                    <div class="widget-icon">ğŸŒ¤ï¸</div>
                    <div>
                        <div class="widget-value">72Â°F</div>
                        <div class="widget-label">Yonkers</div>
                    </div>
                </div>

            </div>

            <h1 style="
                text-align: center;
                font-size: 2.5em;
                margin: 20px 0;
                background: linear-gradient(135deg, #ffffff 0%, #9CA3AF 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            ">
                Kings Protocol
            </h1>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs" style="display:flex; width:100%;">
            <button class="nav-tab active" onclick="showPage('dashboard')">ğŸ“Š Dashboard</button>
            <button class="nav-tab" onclick="showPage('goalsHabits')">ğŸ¯ Goals & Habits</button>
            <button class="nav-tab" onclick="showPage('workout')">ğŸ’ª Workouts</button>
            <button class="nav-tab" onclick="showPage('journal')">ğŸ“ Journal</button>
            <button class="nav-tab" onclick="showPage('visionBoard')">ğŸ–¼ï¸ Vision Board</button>
            <button class="nav-tab" onclick="showPage('content')">ğŸ¬ Content</button>
            <button class="nav-tab" onclick="showPage('books')">ğŸ“š Books</button>
            <button class="nav-tab" onclick="showPage('settings')">âš™ï¸ Settings</button>
        </div>

        <!-- ADD GOAL BUTTON (SCOPED) -->
        <div id="addGoalWrapper" style="
            display:none;
            position:absolute;
            top:190px;
            right:26px;
            z-index:5;
        ">
            <button class="mode-toggle" onclick="openAddGoal()">
                + Add New Goal
            </button>
        </div>

        <!-- Dashboard -->
        <div id="dashboardPage" class="page active"></div>

        <!-- Goals -->
        <div id="goalsHabitsPage" class="page">
            <div id="goalsGrid"></div>
        </div>

        <!-- Workouts -->
        <div id="workoutPage" class="page">
            <div id="exerciseCards"></div>
        </div>

        <!-- Journal -->
        <div id="journalPage" class="page">
            <div id="journalContainer"></div>
        </div>

        <!-- Vision Board -->
        <div id="visionBoardPage" class="page">
            <div id="visionBoardContainer"></div>
        </div>

        <!-- Content -->
        <div id="contentPage" class="page">
            <div id="contentContainer"></div>
        </div>

        <!-- Books -->
        <div id="booksPage" class="page">
            <div id="booksContainer"></div>
        </div>

        <!-- Settings -->
        <div id="settingsPage" class="page">
            <div class="section-title">âš™ï¸ Settings</div>
            <p style="color:#9CA3AF; text-align:center; padding:40px;">Coming Soonâ€¦</p>
        </div>

    </div>

    <!-- Modal -->
    <div id="modal" class="modal" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="features/habits.js"></script>
    <script src="features/goals.js"></script>
    <script src="features/mood.js"></script>
    <script src="features/workout.js"></script>
    <script src="features/journal.js"></script>
    <script src="features/vision-board.js"></script>
    <script src="features/reading-list.js"></script>
    <script src="features/content-tracker.js"></script>
    <script src="app.js?v=8"></script>

    <!-- Scoped Add Goal Logic -->
    <script>
        function syncAddGoalButton() {
            const btn = document.getElementById('addGoalWrapper');
            const goalsPage = document.getElementById('goalsHabitsPage');
            if (!btn || !goalsPage) return;

            btn.style.display = goalsPage.classList.contains('active')
                ? 'block'
                : 'none';
        }

        document.addEventListener('DOMContentLoaded', syncAddGoalButton);

        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                setTimeout(syncAddGoalButton, 0);
            });
        });
    </script>

</body>
</html>
